Drupal.behaviors.pagination={attach:()=>{once("pagination",".pager__items").forEach(i=>{const f=e=>parseInt(e.querySelector("a").href.split("page=")[1])+1,t=f(i.querySelector(".pager__item--last"));if(t<=5)return;let a;const n=i.querySelector(".pager__item.is-active"),s=f(n);s<=3?a=[1,2,3,4,"...",t]:s>=t-2?a=[1,"...",t-3,t-2,t-1,t]:a=[1,"...",s-1,s,s+1,"...",t];const g=Array.from(i.querySelectorAll(".pager__item:not(.pager__item--first):not(.pager__item--previous):not(.pager__item--next):not(.pager__item--last)")),c=[],l=[];g.forEach(e=>{e!=n&&(e.classList.contains("pager__item--ellipsis")?l.push(e):c.push(e))});let p=i.querySelector(".pager__item--next");a.reverse().forEach(e=>{let r;if(e=="...")r=l.shift(),r||(r=document.createElement("li"),r.innerHTML="&hellip;");else if(e==s)r=n;else{r=c.shift();const o=r.querySelector("a");o.href=o.href.replace(/page=[0-9]+/,"page="+(e-1).toString()),o.title="Go to page "+e.toString(),o.childNodes[o.childNodes.length-1].nodeValue=e.toString()}p?(i.insertBefore(r,p),p=r):i.prepend(r)}),c.forEach(e=>e.remove()),l.forEach(e=>e.remove())})}};
