import{u as l}from"./utilities-CT1sfag7.js";function a({textContent:i}){const t=document.createDocumentFragment(),e=document.createElement("button"),n=l("accordion");return e.textContent=i,e.setAttribute("type","button"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls",n),e.classList.add("nsw-accordion__button"),e.insertAdjacentHTML("beforeend",`
  <span class="material-icons nsw-material-icons" focusable="false" aria-hidden="true">keyboard_arrow_down</span>
  `),t.appendChild(e),t}class c{constructor(t){this.element=t;const[e,n]=Array.from(this.element.querySelectorAll(".nsw-accordion__toggle button"));this.accordionHeadingClass=".nsw-accordion__title",this.headings=this.element.querySelectorAll(this.accordionHeadingClass),this.expandAllBtn=e,this.collapseAllBtn=n,this.isExpandedOnLoad=this.element.querySelectorAll(".nsw-accordion__open"),this.buttons=[],this.content=[],this.toggleEvent=s=>this.toggle(s),this.expandAllEvent=s=>this.expandAll(s),this.collapseAllEvent=s=>this.collapseAll(s)}init(){this.setUpDom(),this.controls()}setUpDom(){this.element.classList.add("ready"),this.collapseAllBtn&&(this.collapseAllBtn.disabled=!0),this.headings.forEach(t=>{const e=t,n=t.nextElementSibling,s=a(t);e.textContent="",e.appendChild(s);const o=e.getElementsByTagName("button")[0];n&&(n.id=o.getAttribute("aria-controls"),n.hidden="until-found",this.content.push(n)),this.buttons.push(o)}),this.isExpandedOnLoad&&this.isExpandedOnLoad.forEach(t=>{const e=t.querySelector("button");this.setAccordionState(e,"open")})}controls(){this.buttons.forEach(t=>{t.addEventListener("click",this.toggleEvent,!1),t.addEventListener("beforematch",this.toggleEvent,!1)}),this.expandAllBtn&&this.collapseAllBtn&&(this.expandAllBtn.addEventListener("click",this.expandAllEvent,!1),this.collapseAllBtn.addEventListener("click",this.collapseAllEvent,!1))}getTargetContent(t){const e=this.buttons.indexOf(t);return this.content[e]}setAccordionState(t,e){const n=this.getTargetContent(t);e==="open"?(t.classList.add("active"),t.setAttribute("aria-expanded","true"),n.hidden=!1):e==="close"&&(t.classList.remove("active"),t.setAttribute("aria-expanded","false"),n.hidden="until-found")}toggle(t){const{currentTarget:e}=t,n=this.getTargetContent(e);if(n){const s=n.hidden;s===!0||s==="until-found"?this.setAccordionState(e,"open"):this.setAccordionState(e,"close"),this.expandAllBtn&&this.collapseAllBtn&&(this.expandAllBtn.disabled=this.content.every(o=>o.hidden===!1),this.collapseAllBtn.disabled=this.content.every(o=>o.hidden==="until-found"))}}expandAll(){this.buttons.forEach(t=>{this.setAccordionState(t,"open")}),this.expandAllBtn.disabled=!0,this.collapseAllBtn.disabled=!1}collapseAll(){this.buttons.forEach(t=>{this.setAccordionState(t,"close")}),this.expandAllBtn.disabled=!1,this.collapseAllBtn.disabled=!0}}Drupal.behaviors.accordion={attach:()=>{once("accordion",".nsw-accordion.js-accordion").forEach(i=>{const t=new c(i);t.init(),t.buttons.forEach(e=>{e.removeEventListener("click",t.toggleEvent),e.addEventListener("mousedown",n=>{t.toggle(n)}),e.addEventListener("keydown",n=>{n.repeat||[" ","Enter"].includes(n.key)&&t.toggle(n)})})})}};
